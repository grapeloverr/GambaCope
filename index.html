<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>No Limit Enhanced Slot Machine</title>
  <style>
    body {
      background: radial-gradient(circle, #1a1a1a, #000);
      font-family: Arial, sans-serif;
      color: #fff;
      text-align: center;
      margin: 0;
      padding: 20px;
    }
    h1 {
      margin-bottom: 20px;
    }
    /* Container for the 6x6 grid using CSS Grid */
    .slot-grid {
      display: grid;
      grid-template-columns: repeat(6, 60px);
      grid-gap: 5px;
      justify-content: center;
      margin-bottom: 20px;
    }
    .slot-cell {
      width: 60px;
      height: 60px;
      font-size: 32px;
      display: flex;
      justify-content: center;
      align-items: center;
      border: 2px solid #fff;
      background: #222;
      border-radius: 10%;
    }
    /* Simple animation to simulate a spin effect */
    .spin-animation {
      animation: spin 0.5s ease;
    }
    @keyframes spin {
      0% { transform: scale(1) rotate(0deg); }
      50% { transform: scale(1.1) rotate(15deg); }
      100% { transform: scale(1) rotate(0deg); }
    }
    .results {
      margin-top: 20px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      background-color: #ff9900;
      color: #000;
    }
  </style>
</head>
<body>
  <h1>No Limit Enhanced Slot Machine</h1>
  
  <!-- Slot grid (6x6) -->
  <div class="slot-grid" id="slotGrid"></div>
  
  <!-- Score and spin button -->
  <div class="results">
    <p>Tokens: <span id="tokenCount">0</span></p>
    <button id="spinButton">Spin</button>
  </div>
  
  <!-- Audio elements for sound effects. Replace "spin.mp3" and "win.mp3" with your own files -->
  <audio id="spinSound" src="spin.mp3"></audio>
  <audio id="winSound" src="win.mp3"></audio>
  
  <script>
    // Define available symbols; an extra symbol (🍀) was added for variety.
    const symbols = ["🍒", "🍋", "🔔", "💎", "7️⃣", "🍀"];
    let tokens = 0;
    
    const gridElement = document.getElementById("slotGrid");
    const tokenDisplay = document.getElementById("tokenCount");
    const spinButton = document.getElementById("spinButton");
    const spinSound = document.getElementById("spinSound");
    const winSound = document.getElementById("winSound");
    
    // Create a 6x6 grid (36 cells)
    const gridCells = [];
    for (let i = 0; i < 36; i++) {
      const cell = document.createElement("div");
      cell.classList.add("slot-cell");
      // Set each cell to a random symbol initially
      cell.innerText = symbols[Math.floor(Math.random() * symbols.length)];
      gridElement.appendChild(cell);
      gridCells.push(cell);
    }
    
    // Helper function to play a given audio element
    function playSound(audioElement) {
      if (audioElement) {
        audioElement.currentTime = 0;
        audioElement.play();
      }
    }
    
    // Spin the slot machine
    function spin() {
      playSound(spinSound); // Play spin sound
      
      // Change each cell’s symbol with a quick animation
      gridCells.forEach(cell => {
        cell.classList.add("spin-animation");
        cell.innerText = symbols[Math.floor(Math.random() * symbols.length)];
      });
      
      // Remove animation class after it's done and check for wins
      setTimeout(() => {
        gridCells.forEach(cell => cell.classList.remove("spin-animation"));
        checkWin();
      }, 500);
    }
    
    // Check for winning combinations horizontally and vertically.
    // Here, earning tokens is based on getting three or more consecutive same symbols.
    function checkWin() {
      let winAmount = 0;
      
      // Horizontal win check for each row
      for (let row = 0; row < 6; row++) {
        let count = 1;
        let currentSymbol = gridCells[row * 6].innerText;
        for (let col = 1; col < 6; col++) {
          let cellSymbol = gridCells[row * 6 + col].innerText;
          if (cellSymbol === currentSymbol) {
            count++;
          } else {
            if (count >= 3) { winAmount += getWinAmount(currentSymbol, count); }
            currentSymbol = cellSymbol;
            count = 1;
          }
        }
        if (count >= 3) { winAmount += getWinAmount(currentSymbol, count); }
      }
      
      // Vertical win check for each column
      for (let col = 0; col < 6; col++) {
        let count = 1;
        let currentSymbol = gridCells[col].innerText;
        for (let row = 1; row < 6; row++) {
          let cellSymbol = gridCells[row * 6 + col].innerText;
          if (cellSymbol === currentSymbol) {
            count++;
          } else {
            if (count >= 3) { winAmount += getWinAmount(currentSymbol, count); }
            currentSymbol = cellSymbol;
            count = 1;
          }
        }
        if (count >= 3) { winAmount += getWinAmount(currentSymbol, count); }
      }
      
      // If wins occur, update tokens and play a win sound effect
      if (winAmount > 0) {
        tokens += winAmount;
        tokenDisplay.innerText = tokens;
        playSound(winSound);
      }
    }
    
    // Calculate win amount based on symbol and number of consecutive hits.
    function getWinAmount(symbol, count) {
      // Base winnings for exactly three in a row
      if (count === 3) {
        if (symbol === "🍒") return 50;
        if (symbol === "🍋") return 100;
        if (symbol === "🔔") return 150;
        if (symbol === "💎") return 300;
        if (symbol === "7️⃣") return 500;
        // For any additional symbol like 🍀 use a fallback value
        return 50;
      }
      // For more than 3 consecutive, add a bonus per extra symbol
      let bonus = (count - 3) * 20;
      if (symbol === "🍒") return 50 + bonus;
      if (symbol === "🍋") return 100 + bonus;
      if (symbol === "🔔") return 150 + bonus;
      if (symbol === "💎") return 300 + bonus;
      if (symbol === "7️⃣") return 500 + bonus;
      return 50 + bonus;
    }
    
    spinButton.addEventListener("click", spin);
  </script>
</body>
</html>
